{"version":3,"file":"request-api-versions.js","sourceRoot":"","sources":["../../../../src/cli/services/webhook/request-api-versions.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,eAAe,EAAC,MAAM,oCAAoC,CAAA;AAMlE,MAAM,mBAAmB,GAAG;;;;CAI3B,CAAA;AAED;;;;;GAKG;AACH,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,KAAa;IACpD,MAAM,EAAC,iBAAiB,EAAE,MAAM,EAAC,GAA4B,MAAM,eAAe,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAA;IAE9G,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAA;IAC9C,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;QACtB,MAAM,CAAC,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;KACxB;SAAM;QACL,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAA;QAC7B,MAAM,CAAC,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;QACvB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;KACxB;IAED,OAAO,MAAM,CAAA;AACf,CAAC","sourcesContent":["import {partnersRequest} from '@shopify/cli-kit/node/api/partners'\n\nexport interface PublicApiVersionsSchema {\n  publicApiVersions: string[]\n}\n\nconst getApiVersionsQuery = `\n  query getApiVersions {\n    publicApiVersions\n  }\n`\n\n/**\n * Requests available api-versions in order to validate flags or present a list of options\n *\n * @param token - Partners session token\n * @returns List of public api-versions\n */\nexport async function requestApiVersions(token: string): Promise<string[]> {\n  const {publicApiVersions: result}: PublicApiVersionsSchema = await partnersRequest(getApiVersionsQuery, token)\n\n  const unstableIdx = result.indexOf('unstable')\n  if (unstableIdx === -1) {\n    result.sort().reverse()\n  } else {\n    result.splice(unstableIdx, 1)\n    result.sort().reverse()\n    result.push('unstable')\n  }\n\n  return result\n}\n"]}