{"version":3,"file":"dependencies.js","sourceRoot":"","sources":["../../../src/cli/services/dependencies.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,iCAAiC,EAAC,MAAM,4CAA4C,CAAA;AAC5F,OAAO,EAAC,WAAW,EAAC,MAAM,0BAA0B,CAAA;AAEpD;;;;;;GAMG;AACH,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,GAAiB;IAC5D,MAAM,KAAK,GAAG;QACZ;YACE,KAAK,EAAE,yBAAyB;YAChC,IAAI,EAAE,KAAK,IAAI,EAAE;gBACf,MAAM,iCAAiC,CAAC;oBACtC,cAAc,EAAE,GAAG,CAAC,cAAc;oBAClC,SAAS,EAAE,GAAG,CAAC,SAAS;oBACxB,IAAI,EAAE,CAAC;iBACR,CAAC,CAAA;YACJ,CAAC;SACF;KACF,CAAA;IACD,MAAM,WAAW,CAAC,KAAK,CAAC,CAAA;IACxB,MAAM,GAAG,CAAC,kBAAkB,EAAE,CAAA;IAC9B,OAAO,GAAG,CAAA;AACZ,CAAC","sourcesContent":["import {AppInterface} from '../models/app/app.js'\nimport {installNPMDependenciesRecursively} from '@shopify/cli-kit/node/node-package-manager'\nimport {renderTasks} from '@shopify/cli-kit/node/ui'\n\n/**\n * Given an app, it installs its NPM dependencies by traversing\n * the sub-directories and finding the ones that have NPM dependencies\n * defined in package.json files.\n * @param app - App whose dependencies will be installed.\n * @returns An copy of the app with the Node dependencies updated.\n */\nexport async function installAppDependencies(app: AppInterface) {\n  const tasks = [\n    {\n      title: 'Installing dependencies',\n      task: async () => {\n        await installNPMDependenciesRecursively({\n          packageManager: app.packageManager,\n          directory: app.directory,\n          deep: 3,\n        })\n      },\n    },\n  ]\n  await renderTasks(tasks)\n  await app.updateDependencies()\n  return app\n}\n"]}