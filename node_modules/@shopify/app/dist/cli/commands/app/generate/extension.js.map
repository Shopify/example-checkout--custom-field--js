{"version":3,"file":"extension.js","sourceRoot":"","sources":["../../../../../src/cli/commands/app/generate/extension.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,QAAQ,EAAC,MAAM,mBAAmB,CAAA;AAC1C,OAAO,QAAQ,MAAM,sBAAsB,CAAA;AAC3C,OAAO,OAAO,MAAM,mCAAmC,CAAA;AACvD,OAAO,QAAQ,MAAM,+BAA+B,CAAA;AACpD,OAAO,EAAC,IAAI,EAAE,KAAK,EAAC,MAAM,aAAa,CAAA;AACvC,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAA;AAErD,MAAM,CAAC,OAAO,OAAO,oBAAqB,SAAQ,OAAO;IAiDhD,MAAM,CAAC,qBAAqB;QACjC,OAAO,wBAAwB,CAAA;IACjC,CAAC;IAEM,KAAK,CAAC,GAAG;QACd,MAAM,EAAC,KAAK,EAAC,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAA;QAEtD,MAAM,QAAQ,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC,CAAC;YACtC,0BAA0B,EAAE,IAAI;YAChC,4BAA4B,EAAE,KAAK,CAAC,WAAW,CAAC,KAAK,SAAS;YAC9D,uBAAuB,EAAE,cAAc;SACxC,CAAC,CAAC,CAAA;QAEH,MAAM,QAAQ,CAAC;YACb,SAAS,EAAE,KAAK,CAAC,IAAI;YACrB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,MAAM,EAAE,KAAK,CAAC,SAAS,CAAC;YACxB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,QAAQ,EAAE,KAAK,CAAC,WAAW,CAAC;YAC5B,QAAQ,EAAE,KAAK,CAAC,QAAQ;YACxB,MAAM,EAAE,IAAI,CAAC,MAAM;SACpB,CAAC,CAAA;IACJ,CAAC;;AAvEM,gCAAW,GAAG,wBAAwB,CAAA;AACtC,6BAAQ,GAAG,CAAC,qCAAqC,CAAC,CAAA;AAElD,0BAAK,GAAG;IACb,GAAG,WAAW;IACd,GAAG,QAAQ;IACX,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC;QACjB,IAAI,EAAE,GAAG;QACT,MAAM,EAAE,KAAK;QACb,WAAW,EAAE,gBAAgB;QAC7B,GAAG,EAAE,6BAA6B;KACnC,CAAC;IACF,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC;QACjB,IAAI,EAAE,GAAG;QACT,MAAM,EAAE,KAAK;QACb,WAAW,EAAE,wBAAwB;QACrC,GAAG,EAAE,mBAAmB;KACzB,CAAC;IACF,WAAW,EAAE,KAAK,CAAC,MAAM,CAAC;QACxB,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,GAAG;QACT,WAAW,EACT,wHAAwH;QAC1H,GAAG,EAAE,wBAAwB;KAC9B,CAAC;IACF,QAAQ,EAAE,KAAK,CAAC,MAAM,CAAC;QACrB,MAAM,EAAE,KAAK;QACb,WAAW,EAAE,iEAAiE;QAC9E,OAAO,EAAE,CAAC,YAAY,EAAE,OAAO,EAAE,YAAY,EAAE,kBAAkB,EAAE,MAAM,EAAE,MAAM,CAAC;QAClF,GAAG,EAAE,uBAAuB;KAC7B,CAAC;IACF,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC;QACnB,MAAM,EAAE,KAAK;QACb,WAAW,EAAE,0BAA0B;QACvC,GAAG,EAAE,oBAAoB;QACzB,OAAO,EAAE,KAAK;KACf,CAAC;IACF,SAAS,EAAE,KAAK,CAAC,MAAM,CAAC;QACtB,MAAM,EAAE,KAAK;QACb,WAAW,EAAE,0BAA0B;QACvC,GAAG,EAAE,0BAA0B;KAChC,CAAC;CACH,CAAA;AAEM,yBAAI,GAAG;IACZ,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE;CACpB,CAAA","sourcesContent":["import {appFlags} from '../../../flags.js'\nimport metadata from '../../../metadata.js'\nimport Command from '../../../utilities/app-command.js'\nimport generate from '../../../services/generate.js'\nimport {Args, Flags} from '@oclif/core'\nimport {globalFlags} from '@shopify/cli-kit/node/cli'\n\nexport default class AppGenerateExtension extends Command {\n  static description = 'Scaffold an Extension.'\n  static examples = ['<%= config.bin %> <%= command.id %>']\n\n  static flags = {\n    ...globalFlags,\n    ...appFlags,\n    type: Flags.string({\n      char: 't',\n      hidden: false,\n      description: `Extension type`,\n      env: 'SHOPIFY_FLAG_EXTENSION_TYPE',\n    }),\n    name: Flags.string({\n      char: 'n',\n      hidden: false,\n      description: 'name of your Extension',\n      env: 'SHOPIFY_FLAG_NAME',\n    }),\n    'clone-url': Flags.string({\n      hidden: true,\n      char: 'u',\n      description:\n        'The Git URL to clone the function extensions templates from. Defaults to: https://github.com/Shopify/function-examples',\n      env: 'SHOPIFY_FLAG_CLONE_URL',\n    }),\n    template: Flags.string({\n      hidden: false,\n      description: 'Choose a starting template for your extension, where applicable',\n      options: ['vanilla-js', 'react', 'typescript', 'typescript-react', 'wasm', 'rust'],\n      env: 'SHOPIFY_FLAG_TEMPLATE',\n    }),\n    reset: Flags.boolean({\n      hidden: false,\n      description: 'Reset all your settings.',\n      env: 'SHOPIFY_FLAG_RESET',\n      default: false,\n    }),\n    'api-key': Flags.string({\n      hidden: false,\n      description: 'The API key of your app.',\n      env: 'SHOPIFY_FLAG_APP_API_KEY',\n    }),\n  }\n\n  static args = {\n    file: Args.string(),\n  }\n\n  public static analyticsNameOverride(): string | undefined {\n    return 'app scaffold extension'\n  }\n\n  public async run(): Promise<void> {\n    const {flags} = await this.parse(AppGenerateExtension)\n\n    await metadata.addPublicMetadata(() => ({\n      cmd_scaffold_required_auth: true,\n      cmd_scaffold_template_custom: flags['clone-url'] !== undefined,\n      cmd_scaffold_type_owner: '@shopify/app',\n    }))\n\n    await generate({\n      directory: flags.path,\n      reset: flags.reset,\n      apiKey: flags['api-key'],\n      type: flags.type,\n      name: flags.name,\n      cloneUrl: flags['clone-url'],\n      template: flags.template,\n      config: this.config,\n    })\n  }\n}\n"]}